(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-TxStoryDetail"],{1701:function(t,e,n){var i=n("1cea");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n("967d").default;s("ecb36a5e",i,!0,{sourceMap:!1,shadowMode:!1})},"1cea":function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,".main_view[data-v-7100911d]{padding:%?20?%;background-color:#f9f9f9}.uni-title[data-v-7100911d]{font-size:%?34?%;font-weight:700;color:#333;margin-bottom:%?20?%}.uni-result-wrapper[data-v-7100911d]{margin-bottom:%?30?%}.input-result[data-v-7100911d]{font-size:%?28?%;color:#666;line-height:1.8;white-space:pre-wrap}.btn-view[data-v-7100911d]{display:flex;justify-content:space-around;margin-top:%?20?%}.btn-action[data-v-7100911d]{padding:%?10?% %?20?%;background-color:#007aff;color:#fff;font-size:%?28?%;border-radius:%?25?%;border:none;width:%?250?%;text-align:center;box-shadow:0 %?6?% %?12?% rgba(0,0,0,.1)}.btn-action[data-v-7100911d]:hover{background-color:#0057b7}",""]),t.exports=e},"419c":function(t,e,n){"use strict";var i=n("1701"),s=n.n(i);s.a},5847:function(t,e,n){"use strict";n.r(e);var i=n("6fbc"),s=n("e5f7");for(var a in s)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("419c");var o=n("828b"),c=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"7100911d",null,!1,i["a"],void 0);e["default"]=c.exports},"6fbc":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"main_view"},[n("v-uni-view",{staticClass:"uni-title"},[t._v(t._s(t.story_title))]),n("v-uni-view",{staticClass:"uni-result-wrapper"},[n("v-uni-text",{staticClass:"input-result"},[t._v(t._s(t.story_content))])],1),n("v-uni-view",{staticClass:"btn-view"},[n("v-uni-button",{staticClass:"btn-action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.startReading.apply(void 0,arguments)}}},[t._v("开始朗读")]),n("v-uni-button",{staticClass:"btn-action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pauseReading.apply(void 0,arguments)}}},[t._v("暂停朗读")]),n("v-uni-button",{staticClass:"btn-action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resumeReading.apply(void 0,arguments)}}},[t._v("继续朗读")]),n("v-uni-button",{staticClass:"btn-action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopReading.apply(void 0,arguments)}}},[t._v("停止朗读")])],1)],1)},s=[]},c359:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("5c47"),n("a1c1"),n("8f71"),n("bf0f"),n("dfcf"),n("0c26"),n("aa9c"),n("f7a5");var i={data:function(){return{objectId:"",story_title:"",story_content:"",speechSynthesis:null,voicesLoaded:!1,utterance:null,isPaused:!1}},onLoad:function(t){var e=this;t&&(this.objectId=t.objectId,console.log(this.objectId),this.gotoGetDetail()),this.speechSynthesis=window.speechSynthesis,this.speechSynthesis.getVoices().length>0?(this.voicesLoaded=!0,console.log("语音库已加载")):this.speechSynthesis.onvoiceschanged=function(){e.voicesLoaded=!0,console.log("语音库加载完成")}},methods:{gotoGetDetail:function(){var t=this;uni.showLoading({title:"获取中..."}),uni.request({url:"https://hzmttserver.onrender.com/querySqxgsTianXingDataDetail?id="+t.objectId+"&key=appSQxGS1681706789hzmtt",success:function(e){console.log(e),uni.hideLoading(),t.story_title=e.data.data[0].title,t.story_content=e.data.data[0].content}})},startReading:function(){var t=this;if(this.story_content)if(this.voicesLoaded){this.speechSynthesis.speaking&&this.speechSynthesis.cancel();var e=this.story_content.replace(/\n/g,""),n=e.split(/[。？！,，；：]/).filter((function(t){return""!==t.trim()})),i=0;(function e(){if(i<n.length){for(var s=n[i].trim(),a=[],o=0;o<s.length;o+=30)a.push(s.slice(o,o+30));(function n(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(s<a.length){var o=new SpeechSynthesisUtterance(a[s]);o.lang="zh-CN",o.rate=1,o.pitch=1,o.onend=function(){n(s+1)},t.speechSynthesis.speak(o)}else i++,e()})()}})()}else uni.showToast({title:"语音库未加载，请稍后再试",icon:"none"});else uni.showToast({title:"阅读内容为空！",icon:"none"})},pauseReading:function(){this.speechSynthesis&&this.speechSynthesis.speaking&&(this.speechSynthesis.pause(),this.isPaused=!0)},resumeReading:function(){this.speechSynthesis&&this.isPaused&&(this.speechSynthesis.resume(),this.isPaused=!1)},stopReading:function(){this.speechSynthesis&&this.speechSynthesis.cancel()}}};e.default=i},e5f7:function(t,e,n){"use strict";n.r(e);var i=n("c359"),s=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a}}]);